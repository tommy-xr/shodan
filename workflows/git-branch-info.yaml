version: 2
metadata:
  name: Git Branch Info
  description: Demonstrates template syntax by passing git branch to downstream nodes

nodes:
  - id: trigger_1
    type: trigger
    position: { x: 100, y: 100 }
    data:
      label: Start
      nodeType: trigger
      triggerType: manual
      outputs:
        - name: timestamp
          type: string
        - name: type
          type: string
        - name: text
          type: string
        - name: params
          type: json

  - id: shell_1
    type: shell
    position: { x: 300, y: 100 }
    data:
      label: Get Branch
      nodeType: shell
      commands:
        - git branch --show-current

  - id: shell_2
    type: shell
    position: { x: 500, y: 100 }
    data:
      label: Echo Branch
      nodeType: shell
      commands:
        - "echo \"Currently on branch: {{ input }}\""

edges:
  - id: e1
    source: trigger_1
    target: shell_1
    sourceHandle: output:text
    targetHandle: input:input
  - id: e2
    source: shell_1
    target: shell_2
    sourceHandle: output:stdout
    targetHandle: input:input
