version: 2
metadata:
  name: Test Component Workflow
  description: Tests using a workflow as a component

nodes:
  - id: trigger-1
    type: trigger
    position: { x: 100, y: 100 }
    data:
      nodeType: trigger
      label: Start
      triggerType: manual
      outputs:
        - name: text
          type: string

  - id: component-1
    type: component
    position: { x: 300, y: 100 }
    data:
      nodeType: component
      label: Text Transform
      workflowPath: workflows/components/text-transform.yaml
      inputs:
        - name: text
          type: string
      outputs:
        - name: result
          type: string

  - id: shell-1
    type: shell
    position: { x: 500, y: 100 }
    data:
      nodeType: shell
      label: Print Result
      script: |
        echo "Original: {{ inputs.original }}"
        echo "Transformed: {{ inputs.transformed }}"
      inputs:
        - name: original
          type: string
        - name: transformed
          type: string
      outputs:
        - name: output
          type: string

edges:
  - id: e1
    source: trigger-1
    target: component-1
    sourceHandle: "output:text"
    targetHandle: "input:text"
  - id: e2
    source: trigger-1
    target: shell-1
    sourceHandle: "output:text"
    targetHandle: "input:original"
  - id: e3
    source: component-1
    target: shell-1
    sourceHandle: "output:result"
    targetHandle: "input:transformed"
