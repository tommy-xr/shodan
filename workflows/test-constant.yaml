version: 2
metadata:
  name: Constant Node Test
  description: Tests constant values passing to shell nodes
nodes:
  - id: trigger
    type: trigger
    position:
      x: 50
      "y": 150
    data:
      nodeType: trigger
      label: Start
      triggerType: manual
      inputs: []
      outputs:
        - name: timestamp
          type: string
          description: Trigger timestamp (ISO format)
        - name: type
          type: string
          description: Trigger type (manual, cron, etc.)
        - name: text
          type: string
          description: Input text (for manual triggers)
        - name: params
          type: json
          description: Additional trigger parameters
  - id: greeting
    type: constant
    position:
      x: 200
      "y": 100
    data:
      nodeType: constant
      label: Greeting
      valueType: string
      value: "Hello, Robomesh!"
      outputs:
        - name: value
          type: string
  - id: count
    type: constant
    position:
      x: 200
      "y": 200
    data:
      nodeType: constant
      label: Count
      valueType: number
      value: 42
      outputs:
        - name: value
          type: number
  - id: enabled
    type: constant
    position:
      x: 200
      "y": 300
    data:
      nodeType: constant
      label: Enabled
      valueType: boolean
      value: true
      outputs:
        - name: value
          type: boolean
  - id: echo-all
    type: shell
    position:
      x: 450
      "y": 150
    data:
      nodeType: shell
      label: Echo Values
      script: |
        echo "String: {{ inputs.msg }}"
        echo "Number: {{ inputs.num }}"
        echo "Boolean: {{ inputs.flag }}"
      inputs:
        - name: msg
          type: string
        - name: num
          type: number
        - name: flag
          type: boolean
        - name: input
          type: any
          required: false
          description: Generic input for template interpolation
      outputs:
        - name: output
          type: string
          description: Combined stdout output
        - name: stdout
          type: string
          description: Standard output
        - name: stderr
          type: string
          description: Standard error
        - name: exitCode
          type: number
          description: Exit code (0 = success)
edges:
  - id: e1
    source: greeting
    target: echo-all
    sourceHandle: output:value
    targetHandle: input:msg
  - id: e2
    source: count
    target: echo-all
    sourceHandle: output:value
    targetHandle: input:num
  - id: e3
    source: enabled
    target: echo-all
    sourceHandle: output:value
    targetHandle: input:flag
